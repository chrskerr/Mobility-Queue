(this["webpackJsonpthe-contortionist"]=this["webpackJsonpthe-contortionist"]||[]).push([[0],{43:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(6),r=n(29),i=(n(43),n(37)),s=n(24),o=n.n(s),d=n(4),l=n(30),u=n(11),b=n(3),h=n.n(b);var f=n(25),j=n.n(f),m=n(22),p=n(74),g=n.p+"static/media/logo.62967c48.png",O=n.p+"static/media/single-ding-sound-effect.ab26721d.mp3",x=n(2),y=new Audio(O),v=Object(p.a)({root:{flexGrow:1,padding:"2rem 0",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-evenly"},header:{marginBottom:"1em",textAlign:"center","& img ":{width:"min(95%, 25em)",filter:function(e){return e.darkMode?"invert(1) brightness(10)":""}},"& p":{textAlign:"justify"}},timer:{textAlign:"center",width:"100%"},time:{textAlign:"center",fontSize:"min(25vw, 7em)",color:"var(--highlight)"},controls:{width:"90%",margin:"0 auto",marginTop:"2em",display:"flex",justifyContent:"space-between"},buttonContainer:{width:"min(25%, 8em)",height:"3em","&  button":{textAlign:"center",borderRadius:"8px",border:"none",height:"100%",width:"100%",background:"var(--secondary)",overflow:"hidden",padding:0,cursor:"pointer"}}});function w(e){var t=e.state,n=e.dispatch,c=e.darkMode,r=v({darkMode:c}),i=t.duration,s=t.currentKey,o=t.activitiesList,l=Object(a.useState)({secondsRemaining:i,intervalRef:null,start:function(){return j((function(e){return Object(d.a)(Object(d.a)({},e),{},{intervalRef:setInterval(e.decrementSeconds,1e3)})}))},pause:function(){return j((function(e){return clearInterval(e.intervalRef),Object(d.a)(Object(d.a)({},e),{},{intervalRef:null})}))},reset:function(e){return j((function(t){return clearInterval(t.intervalRef),Object(d.a)(Object(d.a)({},t),{},{intervalRef:null,secondsRemaining:e})}))},decrementSeconds:function(){return j((function(e){return Object(d.a)(Object(d.a)({},e),{},{secondsRemaining:e.secondsRemaining-1})}))}}),b=Object(u.a)(l,2),f=b[0],j=b[1],m=f.secondsRemaining,p=f.intervalRef,O=f.start,w=f.pause,S=f.reset,k=Boolean(p),N="".concat(h.a.floor(m/60),":").concat(m%60<10?"0".concat(m%60):m%60),C=h.a.findIndex(o,{key:s})||0,q=0===C,B=C===h.a.size(o)-1,M=q?h.a.last(o):h.a.nth(o,C-1),I=h.a.nth(o,C),R=B?h.a.head(o):h.a.nth(o,C+1),z=function(){n({type:"setCurrentKey",key:h.a.get(R,"key")}),S(i)};return Object(a.useEffect)((function(){m<=0&&(y.play(),z())}),[m]),Object(a.useEffect)((function(){S(i)}),[i]),h.a.isUndefined(s)?null:Object(x.jsxs)("div",{className:r.root,children:[Object(x.jsxs)("div",{className:r.header,children:[Object(x.jsx)("img",{src:g,alt:"Site logo, woman stretching"}),Object(x.jsxs)("p",{children:["A rolling queue of ",h.a.size(o)," stretches (based on my weaknesses) with a timer and a record of where you left off last time. Try to do ",h.a.ceil(h.a.size(o)/7)," every day to get through them all in a week."]})]}),Object(x.jsxs)("div",{children:[Object(x.jsxs)("h4",{children:["Current activity: ",h.a.get(I,"label")]}),Object(x.jsxs)("p",{className:"-smaller",children:["Next activity: ",h.a.get(R,"label")]})]}),Object(x.jsxs)("div",{className:r.timer,children:[Object(x.jsx)("div",{className:r.time,children:N}),Object(x.jsxs)("div",{className:r.controls,children:[Object(x.jsx)("div",{className:r.buttonContainer,children:Object(x.jsx)("button",{onClick:k?function(){return S(i)}:function(){k?S(i):n({type:"setCurrentKey",key:h.a.get(M,"key")})},children:k?"Restart":"Back"})}),Object(x.jsx)("div",{className:r.buttonContainer,children:Object(x.jsx)("button",{onClick:k?w:function(){O(),y.play(),y.pause()},children:k?"Pause":"Start"})}),Object(x.jsx)("div",{className:r.buttonContainer,children:Object(x.jsx)("button",{onClick:z,children:"Next"})})]})]})]})}var S=n(9),k=n(72),N=n(73),C=n(7),q=Object(p.a)({root:{flexGrow:1,padding:"4rem 0",display:"flex",flexDirection:"column",margin:"0 auto","& *":{animation:"$fadein 150ms",willChange:"opacity"}},header:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",marginBottom:"1.5rem","& > *":{minWidth:"13rem"},"& > div":{display:"flex",justifyContent:"space-between"},"& button":{background:"var(--tertiary)",display:"flex",justifyContent:"center",alignItems:"center",border:"none",borderRadius:"4px",padding:"0.3rem 0.6rem",cursor:"pointer",fontSize:"80%"}},input:{display:"flex",alignItems:"center",paddingTop:"0.5rem",paddingBottom:"0.5rem",flexWrap:"wrap","& > *":{margin:"0 0.5rem 0 0.5rem",padding:0}},stretchMapInput:{display:"flex",alignItems:"center",paddingTop:"0.5rem",paddingBottom:"0.5rem",flexWrap:"wrap",justifyContent:function(e){return e.isBig?"space-betweem":"flex-start"},"& > *":{margin:"0.2rem 0.5rem",padding:0}},borderBottom:{borderBottom:"1px dashed lightgrey"},button:{display:"flex",justifyContent:"center",alignItems:"center",border:"none",borderRadius:"4px",padding:"0.3rem 0.4rem",cursor:"pointer",fontSize:"70%","& span":{padding:0,margin:0}},deleteButton:{background:"var(--highlight)",width:"60px"},addButton:{background:"var(--secondary)",width:"60px"},upDownButton:{background:"white",padding:0,margin:"0.25rem",border:"1px inset var(--paragraph)"},hidden:{opacity:0,cursor:"default"},disabledButton:{opacity:.25,cursor:"not-allowed"},popover:{"& .MuiPaper-root":{marginTop:"8px",padding:"1.5rem",maxHeight:"70vh",maxWidth:"70vw"}},"@keyframes fadein":{from:{opacity:0},to:{opacity:1}}});function B(e){var t=e.state,n=e.dispatch,c=t.duration,r=t.useDefaultStretches,i=t.stretchesMap,s=t.activitiesList,o=Object(k.a)("(min-width:893px)"),l=q({isBig:o}),b=Object(a.useState)(!1),f=Object(u.a)(b,2),j=f[0],m=f[1],p=Object(a.useState)(!1),g=Object(u.a)(p,2),O=g[0],y=g[1],v=Object(a.useState)({name:"",frequency:1,bothSides:!0}),w=Object(u.a)(v,2),B=w[0],M=w[1],R=function(e,t){m(t),y(e.currentTarget)};return Object(x.jsxs)("div",{className:l.root,children:[Object(x.jsxs)("div",{className:l.header,children:[Object(x.jsx)("h4",{children:"Settings:"}),Object(x.jsxs)("div",{children:[Object(x.jsx)("button",{onClick:function(e){return R(e,"guide")},children:"Guide"}),Object(x.jsx)("button",{onClick:function(e){return R(e,"queue")},children:"Show Queue"})]})]}),Object(x.jsxs)(N.a,{className:l.popover,open:Boolean(j),anchorEl:O,onClose:function(){m(!1),y(!1)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:["guide"===j&&Object(x.jsx)(D,{}),"queue"===j&&Object(x.jsx)(T,{activitiesList:s})]}),Object(x.jsxs)("div",{className:l.input,children:[Object(x.jsx)("h5",{children:"Duration:"}),Object(x.jsx)(z,{value:c,onChange:function(e){return n({type:"setDuration",value:Number(e)})}}),Object(x.jsxs)("p",{children:["seconds \u2248 ",h.a.round(c/60,1)," mins"]})]}),Object(x.jsxs)("div",{className:l.input,children:[Object(x.jsx)("h5",{children:"Use Default Stretches?:"}),Object(x.jsx)(I,{checked:r,onChange:function(){return n({type:"setUseDefaultStretches",value:!r})}})]}),!h.a.isEmpty(i)&&h.a.map(h.a.concat(i),(function(e,t){return Object(x.jsxs)("div",{className:Object(C.a)(l.stretchMapInput,l.borderBottom),children:[Object(x.jsx)(z,{disabled:r,label:"Name",value:h.a.get(e,"name"),onChange:function(e){return n({type:"updateStretchesMap",stretchesMap:h.a.map(i,(function(n,a){return t!=a?n:Object(d.a)(Object(d.a)({},n),{},{name:e})}))})}}),Object(x.jsx)(z,{disabled:r,label:"Frequency",value:h.a.get(e,"frequency"),onChange:function(e){return n({type:"updateStretchesMap",stretchesMap:h.a.map(i,(function(n,a){return t!=a?n:Object(d.a)(Object(d.a)({},n),{},{frequency:Number(e)})}))})}}),Object(x.jsx)(I,{disabled:r,label:"Both Sides",checked:h.a.get(e,"bothSides"),onChange:function(){return n({type:"updateStretchesMap",stretchesMap:h.a.map(i,(function(n,a){return t!=a?n:Object(d.a)(Object(d.a)({},n),{},{custom:!h.a.get(e,"custom")})}))})}}),Object(x.jsx)("button",{disabled:r,className:Object(C.a)(l.button,l.deleteButton,Object(S.a)({},l.disabledButton,r)),onClick:function(){r||n({type:"updateStretchesMap",stretchesMap:h.a.reject(i,(function(e,n){return t===n}))})},children:"Delete"}),Object(x.jsx)("button",{className:Object(C.a)(l.button,l.upDownButton,Object(S.a)({},l.disabledButton,r||0===t)),disabled:0===t,onClick:function(){r||0===t||n({type:"updateStretchesMap",stretchesMap:h.a.reduce(i,(function(n,a,c){return c===t?n:c===t-1?h.a.concat(n,e,a):h.a.concat(n,a)}),[])})},children:Object(x.jsx)("span",{className:"fa-chevron-up"})}),Object(x.jsx)("button",{className:Object(C.a)(l.button,l.upDownButton,Object(S.a)({},l.disabledButton,r||t===h.a.size(i)-1)),disabled:t===h.a.size(i)-1,onClick:function(){r||t===h.a.size(i)-1||n({type:"updateStretchesMap",stretchesMap:h.a.reduce(i,(function(n,a,c){return c===t?n:c===t+1?h.a.concat(n,a,e):h.a.concat(n,a)}),[])})},children:Object(x.jsx)("span",{className:"fa-chevron-down"})})]},t)})),Object(x.jsxs)("div",{className:l.stretchMapInput,children:[Object(x.jsx)(z,{disabled:r,label:"Name",value:h.a.get(B,"name"),onChange:function(e){return M((function(t){return Object(d.a)(Object(d.a)({},t),{},{name:e})}))}}),Object(x.jsx)(z,{disabled:r,label:"Frequency",value:h.a.get(B,"frequency"),onChange:function(e){return M((function(t){return Object(d.a)(Object(d.a)({},t),{},{frequency:Number(e)})}))}}),Object(x.jsx)(I,{disabled:r,label:"Both Sides",checked:h.a.get(B,"bothSides"),onChange:function(){return M((function(e){return Object(d.a)(Object(d.a)({},e),{},{custom:!e.custom})}))}}),Object(x.jsx)("button",{className:Object(C.a)(l.button,l.addButton,Object(S.a)({},l.disabledButton,!B.name||!B.frequency||r)),disabled:!B.name||!B.frequency||r,onClick:function(){B.name&&B.frequency&&(n({type:"updateStretchesMap",stretchesMap:h.a.concat(i,B)}),M({name:"",frequency:1,bothSides:!0}))},children:"Add"}),Object(x.jsx)("button",{className:Object(C.a)(l.button,l.upDownButton,l.hidden,Object(S.a)({},l.disabledButton,r)),disabled:!0,onClick:function(){},children:Object(x.jsx)("span",{className:"fa-chevron-up"})}),Object(x.jsx)("button",{disabled:!0,className:Object(C.a)(l.button,l.upDownButton,l.hidden,Object(S.a)({},l.disabledButton,r)),onClick:function(){},children:Object(x.jsx)("span",{className:"fa-chevron-down"})})]})]})}var M=Object(p.a)({root:{display:"flex",alignItems:"center",opacity:function(e){return e.disabled?.25:1}},label:{fontSize:"85%",padding:"0 1rem 0 0",margin:0},toggle:{borderStyle:"solid",borderColor:"var(--tertiary)",borderWidth:"1px",padding:"3px",cursor:"pointer","& span":{opacity:function(e){return e.checked?1:0},fontWeight:"bold"}}}),I=function(e){var t=e.checked,n=e.onChange,a=e.label,c=e.disabled,r=M({checked:t,disabled:c});return Object(x.jsxs)("span",{className:r.root,children:[a&&Object(x.jsxs)("label",{className:r.label,children:[a,":"]}),Object(x.jsx)("span",{className:r.toggle,onClick:c?null:n,children:Object(x.jsx)("span",{className:"fa-check"})})]})},R=Object(p.a)({root:{display:"flex",alignItems:"center",opacity:function(e){return e.disabled?.25:1}},label:{fontSize:"85%",padding:"0 1rem 0 0",margin:0},input:{borderStyle:"solid",borderColor:"var(--tertiary)",borderWidth:"1px",padding:"2px",width:function(e){return e.isTypeNumber?"2rem":"8rem"},"& :active, :hover, :focus":{backgroundColor:"var(--secondary)"},"& input":{border:"none"}}}),z=function(e){var t=e.value,n=e.onChange,a=e.label,c=e.disabled,r="number"===typeof t,i=R({isTypeNumber:r,disabled:c});return Object(x.jsxs)("span",{className:i.root,children:[a&&Object(x.jsxs)("label",{className:i.label,children:[a,":"]}),Object(x.jsx)("input",{className:i.input,type:r?"number":"text",value:t,disabled:c,onChange:c?null:function(e){return n(e.target.value)}})]})},L=Object(p.a)({list:{"& li":{fontSize:"75%",width:"90%"}}}),D=function(){var e=L();return Object(x.jsxs)("div",{children:[Object(x.jsx)("h5",{children:"Guide"}),Object(x.jsxs)("ul",{className:e.list,children:[Object(x.jsxs)("li",{children:[Object(x.jsx)("b",{children:"Name:"})," The name which will show up for you in the queue."]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("b",{children:"Frequency:"})," The number of times the stretch will repeat in the queue. If frequencies above 1 are used, then the higher frequency stretches will be added to the end in the same order as originally until the frequency has been hit."]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("b",{children:"Both Sides:"})," A single entry or a single entry for each side of your body. Text will either: just be the name, or for both sided stretches, it will be 'Stretch Left/Right *name*'."]})]})]})},E=Object(p.a)({list:{columnCount:function(e){var t=e.count;return h.a.clamp(1,h.a.ceil(t/20),3)},columnGap:"1.5rem","& li":{fontSize:"75%",width:"90%"}}}),T=function(e){var t=e.activitiesList,n=E({count:h.a.size(t)});return Object(x.jsxs)("div",{children:[Object(x.jsx)("h5",{children:"Whole Stretching Loop"}),Object(x.jsx)("ol",{className:n.list,children:!h.a.isEmpty(t)&&h.a.map(t,(function(e){var t=e.key,n=e.label;return Object(x.jsx)("li",{children:n},t)}))})]})},A=Object(p.a)({root:{flexGrow:1,display:"flex"},viewPort:{flexGrow:1,position:"relative",width:"min(70vw, 40em)"},animated:{willChange:"transform, opacity",display:"flex",flexDirection:"column",position:"absolute",top:0,right:0,left:0,bottom:0},toggle:{position:"fixed",top:"1rem",zIndex:15,"& button":{width:"1.5rem",height:"1.5rem",backgroundColor:"var(--alt-background)",padding:0,border:"none",cursor:"pointer",borderRadius:"4px","& span::before":{color:"var(--alt-paragraph)"}}},darkModeToggle:{right:"1rem"},settingsToggle:{right:"calc( 1rem + 1.5rem + 1rem )"}});function W(){var e=Object(a.useReducer)(K,P),t=Object(u.a)(e,2),n=t[0],c=t[1],r=n.loaded,i=n.stretchesMap;Object(a.useEffect)((function(){Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.getItem("state");case 2:t=e.sent,c({type:"loadLocalStorage",state:Object(d.a)(Object(d.a)({},t),{},{loaded:!0})});case 4:case"end":return e.stop()}}),e)})))()}),[]),Object(a.useEffect)((function(){j.a.setItem("state",n)}),[n]);var s=Object(a.useState)(function(e,t,n){var c=e.map((function(e){return window.matchMedia(e)})),r=function(){var e=c.findIndex((function(e){return e.matches}));return"undefined"!==typeof t[e]?t[e]:n},i=Object(a.useState)(r),s=Object(u.a)(i,2),o=s[0],d=s[1];return Object(a.useEffect)((function(){var e=function(){return d(r)};return c.forEach((function(t){return t.addListener(e)})),function(){return c.forEach((function(t){return t.removeListener(e)}))}}),[]),o}(["(prefers-color-scheme: dark)"],[!0],!1)),b=Object(u.a)(s,2),h=b[0],f=b[1];Object(a.useEffect)((function(){document.getElementById("apple-mobile-web-app-status-bar-style").setAttribute("content",h?"black-translucent":"default")}),[h]);var p=Object(a.useState)(!1),g=Object(u.a)(p,2),O=g[0],y=g[1],v=Object(m.b)({opacity:O?1:0,transform:"perspective(600px) rotateY(".concat(O?180:0,"deg)"),config:{mass:5,tension:500,friction:80}}),S=v.transform,k=v.opacity,N=v.width;Object(a.useEffect)((function(){c({type:"setActivitiesList",activitiesList:F(i)})}),[i]);var q=A();return r?Object(x.jsxs)("div",{className:q.root,children:[Object(x.jsxs)("div",{className:q.viewPort,style:{width:N},children:[Object(x.jsx)(m.a.div,{className:q.animated,style:{zIndex:O?1:10,opacity:k.interpolate((function(e){return 1-e})),transform:S},children:Object(x.jsx)(w,{state:n,dispatch:c,darkMode:h})}),Object(x.jsx)(m.a.div,{className:q.animated,style:{zIndex:O?10:1,opacity:k,transform:S.interpolate((function(e){return"".concat(e," rotateY(180deg)")}))},children:Object(x.jsx)(B,{state:n,dispatch:c})})]}),Object(x.jsx)("div",{className:Object(C.a)(q.toggle,q.settingsToggle),children:Object(x.jsx)("button",{onClick:function(){return y((function(e){return!e}))},children:Object(x.jsx)("span",{className:O?"fa-x":"fa-settings"})})}),Object(x.jsx)("div",{className:Object(C.a)(q.toggle,q.darkModeToggle),children:Object(x.jsx)("button",{onClick:function(){return f((function(e){return!e}))},children:Object(x.jsx)("span",{className:h?"fa-sun":"fa-moon"})})}),Object(x.jsx)("style",{children:"\n\t\t\t\thtml {\n\t\t\t\t\t--background: ".concat(h?"#000":"#ffffff",";\n\t\t\t\t\t--alt-background: ").concat(h?"#ffffff":"#000",";\n\t\t\t\t\t\n\t\t\t\t\t--stroke: ").concat(h?"#121629":"#272343",";\n\t\t\t\t\t--highlight: ").concat(h?"#eebbc3":"#ffd803",";\n\t\t\t\t\t--secondary: ").concat(h?"#fffffe":"#e3f6f5",";\n\t\t\t\t\t--tertiary: ").concat(h?"#eebbc3":"#bae8e8",";\n\t\t\t\t\t--heading: ").concat(h?"#fffffe":"#272343",";\n\t\t\t\t\t\n\t\t\t\t\t--paragraph: ").concat(h?"#b8c1ec":"#2d334a",";\n\t\t\t\t\t--alt-paragraph: ").concat(h?"#2d334a":"#b8c1ec",";\n\t\t\t\t}\n\t\t\t")})]}):null}var G=[{name:"Glute",frequency:3,bothSides:!0},{name:"Hamstring",frequency:3,bothSides:!0},{name:"Quad",frequency:3,bothSides:!0},{name:"Half Lotus",frequency:2,bothSides:!0},{name:"Forearm",frequency:2,bothSides:!0},{name:"Front Shoulder",frequency:2,bothSides:!0},{name:"Standing Pike Stretch",bothSides:!1,frequency:1},{name:"Lat",frequency:1,bothSides:!0},{name:"Pec",frequency:1,bothSides:!0},{name:"Frog Stretch",frequency:1,bothSides:!1},{name:"Calf",frequency:1,hasRolling:!1,bothSides:!0}],F=function(e){var t=h.a.max(h.a.map(e,"frequency")),n=h.a.reduce(h.a.range(0,t),(function(t,n){return h.a.concat(t,h.a.filter(e,(function(e){return e.frequency>=n+1})))}),[]);return h.a.reduce(n,(function(e,t){var n=t.name,a=t.bothSides,c=void 0===a||a,r=h.a.size(h.a.filter(e,{name:n}));return c?h.a.concat(e,{key:"".concat(n,"-right-").concat(r),label:"Stretch Right ".concat(h.a.startCase(n)),name:n},{key:"".concat(n,"-left-").concat(r),label:"Stretch Left ".concat(h.a.startCase(n)),name:n}):h.a.concat(e,{key:"".concat(n,"-").concat(r),label:"".concat(h.a.startCase(n)),name:n})}),[])},K=function(e,t){var n=t.type,a=Object(i.a)(t,["type"]);switch(n){case"loadLocalStorage":return Object(d.a)(Object(d.a)({},e),h.a.get(a,"state"));case"setCurrentKey":return Object(d.a)(Object(d.a)({},e),{},{currentKey:h.a.get(a,"key")});case"setUseDefaultStretches":return Object(d.a)(Object(d.a)({},e),{},{useDefaultStretches:h.a.get(a,"value"),stretchesMap:G});case"setActivitiesList":return Object(d.a)(Object(d.a)({},e),{},{activitiesList:h.a.get(a,"activitiesList")});case"updateStretchesMap":return Object(d.a)(Object(d.a)({},e),{},{stretchesMap:h.a.get(a,"stretchesMap")});case"setDuration":return Object(d.a)(Object(d.a)({},e),{},{duration:h.a.get(a,"value")});default:return e}},P={loaded:!1,duration:150,useDefaultStretches:!0,stretchesMap:G,currentKey:null},U=document.getElementById("root");if(U.hasChildNodes()?Object(c.hydrate)(Object(x.jsx)(W,{}),U):Object(c.render)(Object(x.jsx)(W,{}),U),"serviceWorker"in navigator){var H=new r.a("service-worker.js");H.addEventListener("installed",(function(e){e.isUpdate&&window.location.reload()})),H.register()}}},[[51,1,2]]]);
//# sourceMappingURL=main.19cc6cf1.chunk.js.map