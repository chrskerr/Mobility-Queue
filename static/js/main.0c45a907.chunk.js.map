{"version":3,"sources":["logo.png","single-ding-sound-effect.mp3","app.js","use-media.js","index.js"],"names":["audio","Audio","audioFile","App","useState","currentKey","setCurrentKey","queries","values","defaultValue","mediaQueryLists","map","q","window","matchMedia","getValue","index","findIndex","mql","matches","value","setValue","useEffect","handler","forEach","addListener","removeListener","useMedia","darkMode","setDarkMode","a","localforage","getItem","setItem","_setViewHeight","_","debounce","newViewHeight","get","document","getElementById","setAttribute","addEventListener","removeEventListener","body","secondsRemaining","intervalRef","start","setTimer","t","setInterval","decrementSeconds","pause","clearInterval","reset","timer","_isRunning","Boolean","timeText","floor","activitiesList","activitiesListGenerator","includeRolling","currentActivityIndex","key","_isFirst","_isLast","size","previousActivity","last","nth","currentActivity","find","head","nextActivity","_handleNext","play","isUndefined","className","id","src","logo","alt","ceil","onClick","d","bodyPartMap","name","unilateral","hasRolling","hasStretch","flatten","part","i","output","push","type","label","startCase","activityBuilder","rootElement","hasChildNodes","hydrate","render"],"mappings":"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","file":"static/js/main.0c45a907.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.62967c48.png\";","export default __webpack_public_path__ + \"static/media/single-ding-sound-effect.ab26721d.mp3\";","\n// dev\nimport React, { useState, useEffect } from \"react\";\nimport _ from \"lodash\";\nimport localforage from \"localforage\";\nimport useMedia from \"./use-media\";\n\n// app\nimport logo from \"./logo.png\";\nimport audioFile from \"./single-ding-sound-effect.mp3\";\nconst audio = new Audio( audioFile );\n\n//\n// App\n//\n\nconst activityDurationSeconds = 60 * 2.5;\n\nexport default function App () {\n\tconst [ currentKey, setCurrentKey ] = useState();\n\tconst [ darkMode, setDarkMode ] = useState( useMedia([ \"(prefers-color-scheme: dark)\" ], [ true ], false ));\n\n\tuseEffect(() => {\n\t\t( async () => setCurrentKey( await localforage.getItem( \"currentKey\" )))();\n\t}, []);\n\n\tuseEffect(() => {\n\t\tlocalforage.setItem( \"currentKey\", currentKey );\n\t}, [ currentKey ]);\n\n\tconst _setViewHeight = _.debounce(() => {\n\t\tconst newViewHeight = _.get( window, \"innerHeight\" );\n\t\tconst el = document.getElementById( \"root\" );\n\t\tel.setAttribute( \"style\", `height: ${ newViewHeight }; max-height: ${ newViewHeight };` );\n\t}, 100 );\n\n\tuseEffect(() => {\n\t\t_setViewHeight();\n\t\twindow.addEventListener( \"resize\", _setViewHeight );\n\t\treturn () => window.removeEventListener( \"resize\" );\n\t}, []);\n\n\tuseEffect(() => {\n\t\tdocument.body.setAttribute( \"class\", darkMode ? \"-dark-mode\" : \"\" );\n\t\tdocument.getElementById( \"apple-mobile-web-app-status-bar-style\" ).setAttribute( \"content\", darkMode ? \"black-translucent\" : \"default\" );\n\t}, [ darkMode ]);\n\t\n\tconst [ timer, setTimer ] = useState({ \n\t\tsecondsRemaining: activityDurationSeconds,\n\t\tintervalRef: null,\n\t\tstart: () => setTimer( t => ({ ...t, intervalRef: setInterval( t.decrementSeconds, 1000 ) })),\n\t\tpause: () => setTimer( t => {\n\t\t\tclearInterval( t.intervalRef );\n\t\t\treturn { ...t, intervalRef: null };\n\t\t}),\n\t\treset: () => setTimer( t => {\n\t\t\tclearInterval( t.intervalRef );\n\t\t\treturn { ...t, intervalRef: null, secondsRemaining: activityDurationSeconds };\n\t\t}),\n\t\tdecrementSeconds: () => setTimer( t => ({ ...t, secondsRemaining: t.secondsRemaining - 1 })),\n\t});\n\tconst { secondsRemaining, intervalRef, start, pause, reset } = timer;\n\tconst _isRunning = Boolean( intervalRef );\n\tconst timeText = `${ _.floor( secondsRemaining / 60 )}:${ secondsRemaining%60 < 10 ? `0${ secondsRemaining%60 }` : secondsRemaining%60 }`;\n\n\tconst activitiesList = activitiesListGenerator({ includeRolling: false });\n\tconst currentActivityIndex = _.findIndex( activitiesList, { key: currentKey }) || 0;\n\n\tconst _isFirst = currentActivityIndex === 0;\n\tconst _isLast = currentActivityIndex === _.size( activitiesList ) - 1;\n\n\tconst previousActivity = _isFirst ? _.last( activitiesList ) : _.nth( activitiesList, currentActivityIndex - 1 );\n\tconst currentActivity = currentKey ? _.find( activitiesList, { key: currentKey }) : _.head( activitiesList );\n\tconst nextActivity = _isLast ? _.head( activitiesList ) : _.nth( activitiesList, currentActivityIndex + 1 );\n\n\tconst _handleNext = () => {\n\t\tsetCurrentKey( _.get( nextActivity, \"key\" ));\n\t\treset();\n\t};\n\n\tconst _handleStart = () => {\n\t\tstart();\n\t\taudio.play();\n\t\taudio.pause();\n\t};\n\n\tconst _handleBack = () => {\n\t\tif ( _isRunning ) reset();\n\t\telse setCurrentKey( _.get( previousActivity, \"key\" ));\n\t};\n\n\tuseEffect(() => { \n\t\tif ( secondsRemaining <= 0 ) {\n\t\t\taudio.play();\n\t\t\t_handleNext();\n\t\t}\n\t}, [ secondsRemaining ]);\n\n\tif ( _.isUndefined( currentKey )) return null;\n\n\treturn (\n\t\t<div className=\"body\" id=\"body\">\n\t\t\t<div className=\"header\">\n\t\t\t\t<img src={ logo } alt=\"Site logo, woman stretching\" />\t\n\t\t\t\t<p>A rolling queue of { _.size( activitiesList ) } stretching activities with a timer and a record of where you left off last time. Try to do { _.ceil( _.size( activitiesList ) / 7 ) } every day to get through every body part in a week.</p>\n\t\t\t</div>\n\t\t\t<div className=\"current\">\n\t\t\t\t<h4>Current activity: { _.get( currentActivity, \"label\" )}</h4>\n\t\t\t\t<p className=\"-smaller\">Next activity: { _.get( nextActivity, \"label\" )}</p>\n\t\t\t</div>\n\t\t\t<div className=\"main\">\n\t\t\t\t<div className=\"timer\">\n\t\t\t\t\t<div className=\"time\">\n\t\t\t\t\t\t{ timeText }\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"controls\">\n\t\t\t\t\t\t<button onClick={ _isRunning ? reset : _handleBack }>{ _isRunning ? \"Restart\" : \"Back\" }</button>\n\t\t\t\t\t\t<button onClick={ _isRunning ? pause : _handleStart }>{ _isRunning ? \"Pause\" : \"Start\" }</button>\n\t\t\t\t\t\t<button onClick={ _handleNext }>Next</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"dark-mode-toggle\">\n\t\t\t\t<button onClick={ () => setDarkMode( d => !d ) }>\n\t\t\t\t\t<span className={ darkMode ? \"fa-sun\" : \"fa-moon\" } />\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nconst activityBuilder = ({ name, hasStretch = true, hasRolling = true, unilateral = true }, includeRolling, i ) => {\n\tconst output = [];\n\n\tif ( unilateral ) {\t\n\t\tif ( hasRolling && includeRolling ) output.push(\n\t\t\t{ key: `${ name }-roll-right-${ i }`, type: \"rolling\", label: `Foam Roll Right ${ _.startCase( name ) }` },\n\t\t\t{ key: `${ name }-roll-left-${ i }`, type: \"rolling\", label: `Foam Roll Left ${ _.startCase( name ) }` },\n\t\t);\n\n\t\tif ( hasStretch ) output.push(\n\t\t\t{ key: `${ name }-stretch-right-${ i }`, type: \"stretching\", label: `Stretch Right ${ _.startCase( name ) }` },\n\t\t\t{ key: `${ name }-stretch-left-${ i }`, type: \"stretching\", label: `Stretch Left ${ _.startCase( name ) }` },\n\t\t);\n\t}\n\telse {\n\t\tif ( hasRolling && includeRolling ) output.push({ key: `${ name }-${ i }`, type: \"rolling\", label: `${ _.startCase( name ) }` });\n\t\tif ( hasStretch ) output.push({ key: `${ name }-${ i }`, type: \"stretching\", label: `${ _.startCase( name ) }` });\n\t}\n\n\treturn output;\n};\n\nconst bodyPartMap = [\n\t{ name: \"standing-pike-stretch\", unilateral: false, hasRolling: false },\n\t{ name: \"glute\" },\n\t{ name: \"lat\" },\n\t{ name: \"pec\" },\n\t{ name: \"quad\" },\n\t{ name: \"hamstring\", hasRolling: false },\n\t{ name: \"frog-stretch\", unilateral: false, hasRolling: false },\n\t{ name: \"calf\", hasRolling: false },\n\t{ name: \"quad\" },\n\t{ name: \"forearm\" },\n\t{ name: \"tricep\" },\n\t{ name: \"lotus\", hasRolling: false },\n\t{ name: \"front-shoulder\", hasRolling: false },\n\t{ name: \"quad\" },\n\t{ name: \"groin\", hasStretch: false },\n\t{ name: \"frog-stretch\", unilateral: false, hasRolling: false },\n\t{ name: \"calf\" },\n\t{ name: \"trap\", hasStretch: false },\n];\n\nconst activitiesListGenerator = ({ includeRolling = false }) => _.flatten( _.map( bodyPartMap, ( part, i ) => activityBuilder( part, includeRolling, i )));\n","\n// Attributed to https://usehooks.com/ on 25 Feb 2021\n\nimport { useState, useEffect } from \"react\";\n\nexport default function useMedia ( queries, values, defaultValue ) {\n\t// Array containing a media query list for each query\n\tconst mediaQueryLists = queries.map( q => window.matchMedia( q ));\n\n\t// Function that gets value based on matching media query\n\tconst getValue = () => {\n\t\t// Get index of first media query that matches\n\t\tconst index = mediaQueryLists.findIndex( mql => mql.matches );\n\t\t// Return related value or defaultValue if none\n\t\treturn typeof values[ index ] !== \"undefined\" ? values[ index ] : defaultValue;\n\t};\n\n\t// State and setter for matched value\n\tconst [ value, setValue ] = useState( getValue );\n\n\tuseEffect(\n\t\t() => {\n\t\t// Event listener callback\n\t\t// Note: By defining getValue outside of useEffect we ensure that it has ...\n\t\t// ... current values of hook args (as this hook callback is created once on mount).\n\t\t\tconst handler = () => setValue( getValue );\n\t\t\t// Set a listener for each media query with above handler as callback.\n\t\t\tmediaQueryLists.forEach( mql => mql.addListener( handler ));\n\t\t\t// Remove listeners on cleanup\n\t\t\treturn () => mediaQueryLists.forEach( mql => mql.removeListener( handler ));\n\t\t},\n\t\t[], // Empty array ensures effect is only run on mount and unmount\n\t);\n\n\treturn value;\n}\n","\n// dev\nimport React from \"react\";\nimport { hydrate, render } from \"react-dom\";\n\n// app\nimport \"./index.scss\";\nimport App from \"./app\";\n\n//\n// Index \n//\n\nconst rootElement = document.getElementById( \"root\" );\nif ( rootElement.hasChildNodes()) {\n\thydrate( <App />, rootElement );\n} else {\n\trender( <App />, rootElement );\n}\n"],"sourceRoot":""}