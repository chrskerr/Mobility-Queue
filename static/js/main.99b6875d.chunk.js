(this["webpackJsonpthe-contortionist"]=this["webpackJsonpthe-contortionist"]||[]).push([[0],{21:function(t,e,n){},25:function(t,e,n){"use strict";n.r(e);var a=n(0),c=n(10),r=n(14),s=(n(21),n(16)),i=n(11),o=n.n(i),u=n(3),l=n(15),f=n(4),d=n(2),j=n.n(d);var b=n(12),h=n.n(b),m=n(8),O=n.p+"static/media/logo.62967c48.png",p=n.p+"static/media/single-ding-sound-effect.ab26721d.mp3",g=n(1),v=new Audio(p);function y(t){var e=t.state,n=t.dispatch,c=t.activitiesList,r=e.duration,s=e.currentKey,i=Object(a.useState)({secondsRemaining:r,intervalRef:null,start:function(){return d((function(t){return Object(u.a)(Object(u.a)({},t),{},{intervalRef:setInterval(t.decrementSeconds,1e3)})}))},pause:function(){return d((function(t){return clearInterval(t.intervalRef),Object(u.a)(Object(u.a)({},t),{},{intervalRef:null})}))},reset:function(){return d((function(t){return clearInterval(t.intervalRef),Object(u.a)(Object(u.a)({},t),{},{intervalRef:null,secondsRemaining:r})}))},decrementSeconds:function(){return d((function(t){return Object(u.a)(Object(u.a)({},t),{},{secondsRemaining:t.secondsRemaining-1})}))}}),o=Object(f.a)(i,2),l=o[0],d=o[1],b=l.secondsRemaining,h=l.intervalRef,m=l.start,p=l.pause,y=l.reset,x=Boolean(h),k="".concat(j.a.floor(b/60),":").concat(b%60<10?"0".concat(b%60):b%60),N=j.a.findIndex(c,{key:s})||0,w=0===N,S=N===j.a.size(c)-1,q=w?j.a.last(c):j.a.nth(c,N-1),R=j.a.nth(c,N),C=S?j.a.head(c):j.a.nth(c,N+1),I=function(){n({type:"setCurrentKey",key:j.a.get(C,"key")}),y()};return Object(a.useEffect)((function(){b<=0&&(v.play(),I())}),[b]),j.a.isUndefined(s)?null:Object(g.jsxs)("div",{className:"main",children:[Object(g.jsxs)("div",{className:"header",children:[Object(g.jsx)("img",{src:O,alt:"Site logo, woman stretching"}),Object(g.jsxs)("p",{children:["A rolling queue of ",j.a.size(c)," stretches (based on my weaknesses) with a timer and a record of where you left off last time. Try to do ",j.a.ceil(j.a.size(c)/7)," every day to get through them all in a week."]})]}),Object(g.jsxs)("div",{className:"current",children:[Object(g.jsxs)("h4",{children:["Current activity: ",j.a.get(R,"label")]}),Object(g.jsxs)("p",{className:"-smaller",children:["Next activity: ",j.a.get(C,"label")]})]}),Object(g.jsxs)("div",{className:"timer",children:[Object(g.jsx)("div",{className:"time",children:k}),Object(g.jsxs)("div",{className:"controls",children:[Object(g.jsx)("div",{className:"button",children:Object(g.jsx)("button",{onClick:x?y:function(){x?y():n({type:"setCurrentKey",key:j.a.get(q,"key")})},children:x?"Restart":"Back"})}),Object(g.jsx)("div",{className:"button",children:Object(g.jsx)("button",{onClick:x?p:function(){m(),v.play(),v.pause()},children:x?"Pause":"Start"})}),Object(g.jsx)("div",{className:"button",children:Object(g.jsx)("button",{onClick:I,children:"Next"})})]})]})]})}function x(t){var e=t.state,n=t.dispatch,a=e.duration,c=e.useDefaultStretches,r=e.customStretchesMap;return console.log(c,r,n,j.a),Object(g.jsxs)("div",{className:"main settings",children:[Object(g.jsx)("h4",{children:"Settings"}),Object(g.jsxs)("div",{children:[Object(g.jsx)("h5",{children:"Duration:"}),Object(g.jsx)("p",{children:a})]})]})}function k(){var t=Object(a.useReducer)(N,w),e=Object(f.a)(t,2),n=e[0],c=e[1],r=n.loaded,s=n.useDefaultStretches,i=n.customStretchesMap;Object(a.useEffect)((function(){Object(l.a)(o.a.mark((function t(){var e;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.a.getItem("state");case 2:e=t.sent,c({type:"loadLocalStorage",state:Object(u.a)(Object(u.a)({},e),{},{loaded:!0})});case 4:case"end":return t.stop()}}),t)})))()}),[]),Object(a.useEffect)((function(){h.a.setItem("state",n)}),[n]);var d=Object(a.useState)(function(t,e,n){var c=t.map((function(t){return window.matchMedia(t)})),r=function(){var t=c.findIndex((function(t){return t.matches}));return"undefined"!==typeof e[t]?e[t]:n},s=Object(a.useState)(r),i=Object(f.a)(s,2),o=i[0],u=i[1];return Object(a.useEffect)((function(){var t=function(){return u(r)};return c.forEach((function(e){return e.addListener(t)})),function(){return c.forEach((function(e){return e.removeListener(t)}))}}),[]),o}(["(prefers-color-scheme: dark)"],[!0],!1)),j=Object(f.a)(d,2),b=j[0],O=j[1];Object(a.useEffect)((function(){document.getElementById("apple-mobile-web-app-status-bar-style").setAttribute("content",b?"black-translucent":"default")}),[b]);var p=Object(a.useState)(!1),v=Object(f.a)(p,2),k=v[0],R=v[1],C=Object(m.b)({opacity:k?1:0,transform:"perspective(600px) rotateY(".concat(k?180:0,"deg)"),config:{mass:5,tension:500,friction:80}}),I=C.transform,E=C.opacity;if(!r)return null;var L=q(s?S:i);return Object(g.jsxs)("div",{className:"app",children:[Object(g.jsxs)("div",{className:"view-port",children:[Object(g.jsx)(m.a.div,{className:"a-div",style:{zIndex:k?1:10,opacity:E.interpolate((function(t){return 1-t})),transform:I},children:Object(g.jsx)(y,{state:n,dispatch:c,activitiesList:L})}),Object(g.jsx)(m.a.div,{className:"a-div",style:{zIndex:k?10:1,opacity:E,transform:I.interpolate((function(t){return"".concat(t," rotateY(180deg)")}))},children:Object(g.jsx)(x,{state:n,dispatch:c})})]}),Object(g.jsx)("div",{className:"toggle settings-toggle",children:Object(g.jsx)("button",{onClick:function(){return R((function(t){return!t}))},children:Object(g.jsx)("span",{className:k?"fa-x":"fa-settings"})})}),Object(g.jsx)("div",{className:"toggle dark-mode-toggle",children:Object(g.jsx)("button",{onClick:function(){return O((function(t){return!t}))},children:Object(g.jsx)("span",{className:b?"fa-sun":"fa-moon"})})}),Object(g.jsx)("style",{children:"\n\t\t\t\thtml {\n\t\t\t\t\t--background: ".concat(b?"#232946":"#ffffff",";\n\t\t\t\t\t--alt-background: ").concat(b?"#ffffff":"#232946",";\n\t\t\t\t\t\n\t\t\t\t\t--stroke: ").concat(b?"#121629":"#272343",";\n\t\t\t\t\t--highlight: ").concat(b?"#eebbc3":"#ffd803",";\n\t\t\t\t\t--secondary: ").concat(b?"#fffffe":"#e3f6f5",";\n\t\t\t\t\t--tertiary: ").concat(b?"#eebbc3":"#bae8e8",";\n\t\t\t\t\t--heading: ").concat(b?"#fffffe":"#272343",";\n\t\t\t\t\t\n\t\t\t\t\t--paragraph: ").concat(b?"#b8c1ec":"#2d334a",";\n\t\t\t\t\t--alt-paragraph: ").concat(b?"#2d334a":"#b8c1ec",";\n\t\t\t\t}\n\n\t\t\t\t").concat(b?"\n\t\t\t\t\t.header img {\n\t\t\t\t\t\tfilter: invert(1);\n\t\t\t\t\t}\n\t\t\t\t":"","\n\t\t\t")})]})}var N=function(t,e){var n=e.type,a=Object(s.a)(e,["type"]);switch(n){case"loadLocalStorage":return Object(u.a)(Object(u.a)({},t),j.a.get(a,"state"));case"setCurrentKey":return Object(u.a)(Object(u.a)({},t),{},{currentKey:j.a.get(a,"key")});default:return t}},w={loaded:!1,duration:150,useDefaultStretches:!0,customStretchesMap:[],currentKey:null},S=[{name:"hamstring",frequency:2},{name:"glute",frequency:3},{name:"quad",frequency:3},{name:"half-lotus",frequency:2},{name:"forearm",frequency:2},{name:"front-shoulder",frequency:2},{name:"standing-pike-stretch",custom:!0,frequency:1},{name:"lat",frequency:1},{name:"pec",frequency:1},{name:"frog-stretch",frequency:1,custom:!0},{name:"calf",frequency:1,hasRolling:!1}],q=function(t){var e=j.a.max(j.a.map(t,"frequency")),n=j.a.uniqBy(t,"name"),a=j.a.reduce(j.a.range(0,e),(function(t,e){var a=j.a.map(j.a.filter(n,(function(t){return t.frequency>=e+1})),(function(t){return Object(u.a)(Object(u.a)({},t),{},{key:"".concat(e,"-").concat(t.name)})}));return j.a.concat(t,a)}),[]);return j.a.reduce(a,(function(t,e){var n=e.key,a=e.name,c=e.custom;return void 0!==c&&c?j.a.concat(t,{key:"".concat(n),type:"stretching",label:"".concat(j.a.startCase(a))}):j.a.concat(t,{key:"".concat(n,"-stretch-right"),type:"stretching",label:"Stretch Right ".concat(j.a.startCase(a))},{key:"".concat(n,"-stretch-left"),type:"stretching",label:"Stretch Left ".concat(j.a.startCase(a))})}),[])},R=document.getElementById("root");if(R.hasChildNodes()?Object(c.hydrate)(Object(g.jsx)(k,{}),R):Object(c.render)(Object(g.jsx)(k,{}),R),"serviceWorker"in navigator){var C=new r.a("service-worker.js");C.addEventListener("installed",(function(t){t.isUpdate&&window.location.reload()})),C.register()}}},[[25,1,2]]]);
//# sourceMappingURL=main.99b6875d.chunk.js.map