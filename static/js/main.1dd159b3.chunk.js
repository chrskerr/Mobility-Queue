(this["webpackJsonpthe-contortionist"]=this["webpackJsonpthe-contortionist"]||[]).push([[0],{16:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n(6),r=n(10),i=(n(16),n(3)),s=n(7),o=n.n(s),u=n(11),l=n(4),f=n(0),d=n.n(f),b=n(8),m=n.n(b);var j=n.p+"static/media/logo.62967c48.png",h=n.p+"static/media/single-ding-sound-effect.ab26721d.mp3",O=n(1),y=new Audio(h);function v(){var e=Object(a.useState)(),t=Object(l.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(function(e,t,n){var c=e.map((function(e){return window.matchMedia(e)})),r=function(){var e=c.findIndex((function(e){return e.matches}));return"undefined"!==typeof t[e]?t[e]:n},i=Object(a.useState)(r),s=Object(l.a)(i,2),o=s[0],u=s[1];return Object(a.useEffect)((function(){var e=function(){return u(r)};return c.forEach((function(t){return t.addListener(e)})),function(){return c.forEach((function(t){return t.removeListener(e)}))}}),[]),o}(["(prefers-color-scheme: dark)"],[!0],!1)),s=Object(l.a)(r,2),f=s[0],b=s[1];Object(a.useEffect)((function(){Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=c,e.next=3,m.a.getItem("currentKey");case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))()}),[]),Object(a.useEffect)((function(){m.a.setItem("currentKey",n)}),[n]);var h=d.a.debounce((function(){var e=d.a.get(window,"innerHeight");document.getElementById("root").setAttribute("style","height: ".concat(e,"; max-height: ").concat(e,";"))}),100);Object(a.useEffect)((function(){return h(),window.addEventListener("resize",h),function(){return window.removeEventListener("resize")}}),[]),Object(a.useEffect)((function(){document.body.setAttribute("class",f?"-dark-mode":""),document.getElementById("apple-mobile-web-app-status-bar-style").setAttribute("content",f?"black-translucent":"default")}),[f]);var v=Object(a.useState)({secondsRemaining:150,intervalRef:null,start:function(){return w((function(e){return Object(i.a)(Object(i.a)({},e),{},{intervalRef:setInterval(e.decrementSeconds,1e3)})}))},pause:function(){return w((function(e){return clearInterval(e.intervalRef),Object(i.a)(Object(i.a)({},e),{},{intervalRef:null})}))},reset:function(){return w((function(e){return clearInterval(e.intervalRef),Object(i.a)(Object(i.a)({},e),{},{intervalRef:null,secondsRemaining:150})}))},decrementSeconds:function(){return w((function(e){return Object(i.a)(Object(i.a)({},e),{},{secondsRemaining:e.secondsRemaining-1})}))}}),x=Object(l.a)(v,2),k=x[0],w=x[1],q=k.secondsRemaining,R=k.intervalRef,E=k.start,N=k.pause,S=k.reset,I=Boolean(R),C="".concat(d.a.floor(q/60),":").concat(q%60<10?"0".concat(q%60):q%60),B=Object(a.useState)(p(g)),L=Object(l.a)(B,1)[0],z=d.a.findIndex(L,{key:n})||0,A=0===z,J=z===d.a.size(L)-1,K=A?d.a.last(L):d.a.nth(L,z-1),U=d.a.nth(L,z),H=J?d.a.head(L):d.a.nth(L,z+1),M=function(){c(d.a.get(H,"key")),S()};return Object(a.useEffect)((function(){q<=0&&(y.play(),M())}),[q]),d.a.isUndefined(n)?null:Object(O.jsxs)("div",{className:"body",id:"body",children:[Object(O.jsxs)("div",{className:"header",children:[Object(O.jsx)("img",{src:j,alt:"Site logo, woman stretching"}),Object(O.jsxs)("p",{children:["A rolling queue of ",d.a.size(L)," stretches (based on my weaknesses) with a timer and a record of where you left off last time. Try to do ",d.a.ceil(d.a.size(L)/7)," every day to get through them all in a week."]})]}),Object(O.jsxs)("div",{className:"current",children:[Object(O.jsxs)("h4",{children:["Current activity: ",d.a.get(U,"label")]}),Object(O.jsxs)("p",{className:"-smaller",children:["Next activity: ",d.a.get(H,"label")]})]}),Object(O.jsx)("div",{className:"main",children:Object(O.jsxs)("div",{className:"timer",children:[Object(O.jsx)("div",{className:"time",children:C}),Object(O.jsxs)("div",{className:"controls",children:[Object(O.jsx)("button",{onClick:I?S:function(){I?S():c(d.a.get(K,"key"))},children:I?"Restart":"Back"}),Object(O.jsx)("button",{onClick:I?N:function(){E(),y.play(),y.pause()},children:I?"Pause":"Start"}),Object(O.jsx)("button",{onClick:M,children:"Next"})]})]})}),Object(O.jsx)("div",{className:"dark-mode-toggle",children:Object(O.jsx)("button",{onClick:function(){return b((function(e){return!e}))},children:Object(O.jsx)("span",{className:f?"fa-sun":"fa-moon"})})})]})}var g=[{name:"hamstring",frequency:2},{name:"glute",frequency:3},{name:"quad",frequency:3},{name:"half-lotus",frequency:2},{name:"forearm",frequency:2},{name:"front-shoulder",frequency:2},{name:"standing-pike-stretch",unilateral:!1,frequency:1},{name:"lat",frequency:1},{name:"pec",frequency:1},{name:"frog-stretch",frequency:1,unilateral:!1},{name:"calf",frequency:1,hasRolling:!1}],p=function(e){var t=d.a.max(d.a.map(e,"frequency")),n=d.a.uniqBy(e,"name"),a=d.a.reduce(d.a.range(0,t),(function(e,t){var a=d.a.map(d.a.filter(n,(function(e){return e.frequency>=t+1})),(function(e){return Object(i.a)(Object(i.a)({},e),{},{key:"".concat(t,"-").concat(e.name)})}));return d.a.concat(e,a)}),[]);return d.a.reduce(a,(function(e,t){var n=t.key,a=t.name,c=t.unilateral;return void 0===c||c?d.a.concat(e,{key:"".concat(n,"-stretch-right"),type:"stretching",label:"Stretch Right ".concat(d.a.startCase(a))},{key:"".concat(n,"-stretch-left"),type:"stretching",label:"Stretch Left ".concat(d.a.startCase(a))}):d.a.concat(e,{key:"".concat(n),type:"stretching",label:"".concat(d.a.startCase(a))})}),[])},x=document.getElementById("root");if(x.hasChildNodes()?Object(c.hydrate)(Object(O.jsx)(v,{}),x):Object(c.render)(Object(O.jsx)(v,{}),x),"serviceWorker"in navigator){var k=new r.a("service-worker.js");k.addEventListener("installed",(function(e){e.isUpdate&&window.location.reload()})),k.register()}}},[[20,1,2]]]);
//# sourceMappingURL=main.1dd159b3.chunk.js.map